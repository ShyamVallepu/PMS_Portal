<h2 class="text-center">Enter details to calculate the pension amount</h2>
<div class="outer-div col-lg-6 offset-lg-3">
    <form #pensionForm='ngForm' (ngSubmit)='handlePensionerInput(); pensionForm.resetForm()' class="px-3">
        <div class="form-group">
            <label for="name"><strong>Name <span class="text-danger">*</span></strong></label>
            <input type="text" class="form-control mt-1" id="name" name="name" #name=ngModel
                [(ngModel)]='pensionerInput.name' placeholder="Enter the pensioner name" required />
        </div>
        <!-- Validations -->
        <div *ngIf="name.invalid && (name.dirty || name.touched)" class="text-error">
            <div *ngIf="name.errors?.required">
                * Username is required
            </div>
        </div> <!-- Name ends here -->

        <!-- DOB -->
        <label for="dob" class="mt-2"><strong>Date of Birth <span class="text-danger">*</span></strong></label>
        <div class="input-group mt-1">
            <input type="date" name="dob" #dob=ngModel class="form-control date-input"
                [(ngModel)]='pensionerInput.dateOfbirth' placeholder="DD/MM/YYYY" required>
            <!-- Validations -->
            <div *ngIf="dob.invalid && (dob.dirty || dob.touched)" class="text-error">
                <div *ngIf="dob.errors?.required">
                    * Date of Birth is required
                </div>
            </div>
        </div>
        <!-- DOB ends here -->

        <!-- PAN Card Number -->
        <div class="form-group mt-2">
            <label for="pan"><strong>PAN Card Number <span class="text-danger">*</span></strong></label>
            <input type="text" class="form-control mt-1" id="pan" name="pan" #pan=ngModel
                [(ngModel)]='pensionerInput.pan' pattern="^[A-Za-z0-9]{10}$"
                placeholder="Enter the 10 digit PAN card number" required />
            <!-- Validations -->
            <div *ngIf="pan.invalid && (pan.dirty || pan.touched)" class="text-error">
                <div *ngIf="pan.errors?.required">
                    * PAN Card Number is required
                </div>
                <div *ngIf="pan.errors?.pattern">
                    * PAN Card format is incorrect
                </div>
            </div>
        </div> <!-- PAN ends here -->

        <!-- Salary Earned-->
        <label for="salary" class="mt-2"><strong>Salary Earned<span class="text-danger">*</span></strong></label>
        <div class="input-group mt-1">
            <input type="number" name="salary" #salary=ngModel class="form-control "
                [(ngModel)]='pensionerInput.salaryEarned' 
                placeholder="Enter your Salary Here" required>
            <!-- Validations -->
            <div *ngIf="salary.invalid && (salary.dirty || salary.touched)" class="text-error">
                <div *ngIf="salary.errors?.required">
                    * Salary is required
                </div>
            </div>
        </div><!-- Salary ends here -->

        <!-- Allowances -->
        <label for="allowances" class="mt-2"><strong>Allowances<span class="text-danger">*</span></strong></label>
        <div class="input-group mt-1">
            <input type="number" name="allowances" #allowances=ngModel class="form-control "
                [(ngModel)]='pensionerInput.allowances' 
                placeholder="Enter your Allowances Here" required>
            <!-- Validations -->
            <div *ngIf="allowances.invalid && (allowances.dirty || allowances.touched)" class="text-error">
                <div *ngIf="allowances.errors?.required">
                    * Allowances is required
                </div>
            </div>
        </div><!-- Allowances ends here -->

        <!-- Aadhaar Number -->
        <div class="form-group mt-2">
            <label for="aadhaar-number"><strong>Aadhaar Number <span class="text-danger">*</span></strong></label>
            <input type="text" class="form-control mt-1" id="aadhaar-number" name="aadhaar" #aadhaar=ngModel
                [(ngModel)]='pensionerInput.aadharNumber' pattern="^[0-9]{12}$"
                placeholder="Enter the 12 digit Aadhaar number" required />
            <!-- Validations -->
            <div *ngIf="aadhaar.invalid && (aadhaar.dirty || aadhaar.touched)" class="text-error">
                <div *ngIf="aadhaar.errors?.required">
                    * Aadhaar Number is required
                </div>
                <div *ngIf="aadhaar.errors?.pattern">
                    * Aadhaar Number format is incorrect
                </div>
            </div>
        </div> <!-- Aadhaar ends here -->

        <!-- Pension Type -->
        <div class="form-group mt-2">
            <label for="p-type"><strong>Pension Type <span class="text-danger">*</span></strong></label>
            <select class="form-control mt-1" id="p-type" name="pension-type" #ptype=ngModel
                [(ngModel)]='pensionerInput.pensionType' required>
                <option value="1">Self</option>
                <option value="2">Family</option>
            </select>
            <!-- Validations -->
            <div *ngIf="ptype.invalid && (ptype.dirty || ptype.touched)" class="text-error">
                <div *ngIf="ptype.errors?.required">
                    * Pension type is required
                </div>
            </div>
        </div> <!-- Pension type ends here -->

        <!-- Bank Name -->
        <div class="form-group">
            <label for="bankName"><strong>Bank Name <span class="text-danger">*</span></strong></label>
            <input type="text" class="form-control mt-1" id="bankName" name="bankName" #bankName=ngModel
                [(ngModel)]='pensionerInput.bankName' placeholder="Enter the Bank name" required />
        </div>
        <!-- Validations -->
        <div *ngIf="bankName.invalid && (bankName.dirty || bankName.touched)" class="text-error">
            <div *ngIf="bankName.errors?.required">
                * Bank Name is required
            </div>
        </div> <!-- Bank Name ends here -->

        <!-- Account Number -->
        <div class="form-group">
            <label for="accountNumber"><strong>Account Number <span class="text-danger">*</span></strong></label>
            <input type="text" class="form-control mt-1" id="accountNumber" name="accountNumber" #accountNumber=ngModel
                [(ngModel)]='pensionerInput.accountNumber' placeholder="Enter the Account Number" required />
        </div>
        <!-- Validations -->
        <div *ngIf="accountNumber.invalid && (accountNumber.dirty || accountNumber.touched)" class="text-error">
            <div *ngIf="accountNumber.errors?.required">
                * Account Number is required
            </div>
        </div> <!-- Bank Name ends here -->

        <!--Bank Type -->
        <div class="form-group mt-2">
            <label for="b-type"><strong>Bank Type <span class="text-danger">*</span></strong></label>
            <select class="form-control mt-1" id="b-type" name="bank-type" #btype=ngModel
                [(ngModel)]='pensionerInput.bankType' required>
                <option value="1">Public</option>
                <option value="2">Private</option>
            </select>
            <!-- Validations -->
            <div *ngIf="btype.invalid && (btype.dirty || btype.touched)" class="text-error">
                <div *ngIf="btype.errors?.required">
                    * Bank type is required
                </div>
            </div>
        </div> <!-- Pension type ends here -->


        <!-- Handle login and reset -->
        <div class="text-center">
            <button class="btn btn-primary mt-3 mx-3" [disabled]="!pensionForm.valid">Add Details</button>
            <button type="reset" class="btn btn-secondary mt-3" (click)="handleReset()">Reset</button>
        </div><!-- Login ends here -->

        <!-- Error messages -->
        <div class="text-error text-center mt-3" (mouseleave)="handleReset()">
            <div *ngFor='let error of fieldErrors'>
                <p>{{ error }}</p>
            </div>
        </div>       

    </form> <!-- Form ends here -->
</div>

<!-- Success Message -->
<h2 [ngClass]="color" class="break-div main-head mt-3 text-center" (mouseleave)="handleReset()">{{ msg }}</h2>